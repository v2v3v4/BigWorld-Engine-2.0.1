<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;3.&nbsp;Physical User Data Object Structure for Scripting</title>
      <link rel="stylesheet" href="../css/bigworld.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="Server Programming Guide">
      <link rel="up" href="pt01.html" title="Part&nbsp;I.&nbsp;Server Scripting Guide">
      <link rel="prev" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Physical Entity Structure for Scripting">
      <link rel="next" href="ch04.html" title="Chapter&nbsp;4.&nbsp;Properties">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div id="bigworld-header"><img src="http://try.bigworldtech.com/bigworld/image.php?img=bigworld_logo.gif&amp;svn=$HeadURL: https://svn01.bigworldtech.com/svn/customers/Xingyulongying/2.0/current/bigworld/doc/generated_html/server_programming_guide/ch03.html $" alt="bw logo"></div>
      <div id="content">
         <div class="navheader">
            <table width="95%" align="center" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Physical User Data Object Structure for Scripting</th>
               </tr>
               <tr>
                  <td width="20%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;
                  </td>
                  <th width="55%" align="center">Part&nbsp;I.&nbsp;Server Scripting Guide</th>
                  <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td>
               </tr>
            </table>
            <hr class="navheaderline">
         </div>
         <div class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="xref_Physical_UDO_Structure_For_Scripting"></a>Chapter&nbsp;3.&nbsp;Physical User Data Object Structure for Scripting
                     </h2>
                  </div>
               </div>
            </div>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <dl>
                  <dt><span class="section"><a href="ch03.html#xref_The_udos_xml_File">3.1. The user_data_objects.xml File</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#xref_The_UDO_Definition_File">3.2. The User Data Object Definition File</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#xref_The_UDO_Script_Files">3.3. The Script Files</a></span></dt>
               </dl>
            </div>
            <p>User data objects are a way of embedding user defined data in Chunk
                 files. Each user data object type is implemented as a collection of Python
                 scripts, and an XML-based definition file that ties the scripts together.
                 These scripts are located in the resource tree under the folder
                 <code class="filename">scripts</code> (i.e.,
                 <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts</code>, where
                 <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em> </code>is the virtual
                 tree defined <code class="filename">~/.bwmachined.conf</code>).
            </p>
            <p>User data objects differ from entities in that they are immutable
                 (i.e. their properties don't change), and that they are not propagated to
                 other cells or clients. This makes them a lot lighter than entities.
            </p>
            <p>A key feature of user data objects is their linkability. Entities are
                 able to link to user data objects, and user data objects are able to link to
                 other user data objects. This is achieved by including a
                 <span class="literal">UDO_REF</span> property in the definition file for the user data
                 object or entity that wishes to link to another user data object.
            </p>
            <p>The list below summarises the important files and directories for user
                 data objects in
                 <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em></code>:
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p><em class="emphasis"><code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em></code></em>
                              &#8212; Resource tree defined in
                              <code class="filename">~/.bwmachined.conf</code>.
                     </p>
                     <div class="itemizedlist">
                        <ul type="circle">
                           <li>
                              <p><em class="emphasis"><code class="filename">scripts</code></em>
                                           &#8212; Folder containing all entity files.
                              </p>
                              <div class="itemizedlist">
                                 <ul type="square">
                                    <li>
                                       <p><em class="emphasis"><code class="filename">user_data_objects.xml</code></em>
                                                        &#8212; Lists all user data objects to load into the client or the
                                                        server at start-up time.
                                       </p>
                                    </li>
                                    <li>
                                       <p><em class="emphasis"><code class="filename">base</code></em>
                                                        &#8212; Folder contains Python scripts for user data objects with a
                                                        base component.
                                       </p>
                                    </li>
                                    <li>
                                       <p><em class="emphasis"><code class="filename">cell</code></em>
                                                        &#8212; Folder contains Python scripts for user data objects with a
                                                        cell component.
                                       </p>
                                    </li>
                                    <li>
                                       <p><em class="emphasis"><code class="filename">client</code></em> &#8212; Folder
                                                        contains Python scripts for user data objects with a client
                                                        component.
                                       </p>
                                    </li>
                                    <li>
                                       <p><em class="emphasis"><code class="filename">common</code></em> &#8212; Folder
                                                        listed in the Python search path for all components. Used for
                                                        common game code.
                                       </p>
                                       <div class="itemizedlist">
                                          <ul type="disc">
                                             <li>
                                                <p><em class="emphasis"><code class="filename">lib</code></em> &#8212; Folder
                                                                       listed in the Python search path for all components. Used
                                                                       for common game code.
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                    <li>
                                       <p><em class="emphasis"><code class="filename">user_data_object_defs</code></em>
                                                        &#8212; Contains the user data object definition files.
                                       </p>
                                       <div class="itemizedlist">
                                          <ul type="disc">
                                             <li>
                                                <p><em class="emphasis"><code class="filename"><em class="replaceable"><code>&lt;user_data_object.def&gt;</code></em></code></em>
                                                                     &#8212; User data object definition file. There is one such file
                                                                     for each user data object defined in
                                                                     <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/user_data_objects.xml</code>.
                                                </p>
                                             </li>
                                             <li>
                                                <p><em class="emphasis"><code class="filename">interfaces</code></em> &#8212;
                                                                     User data object interface definition files
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </li>
               </ul>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_The_udos_xml_File"></a>3.1.&nbsp;The user_data_objects.xml File
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The file
                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/user_data_objects.xml</code>
                      is used by the BigWorld engine to determine the types of user data objects
                      available for use.
               </p>
               <p>The file structure matches that of the
                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/entities/entities.xml</code>.
                      For further details refer to <a href="ch02.html#xref_The_entities_xml_File" title="2.1.&nbsp;The entities.xml File">The entities.xml File</a></p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_The_UDO_Definition_File"></a>3.2.&nbsp;The User Data Object Definition File
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The user data object definition file
                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/user_data_object_defs/<em class="replaceable"><code>&lt;user_data_object&gt;</code></em>.def</code>
                      determines the properties it will store and make accessible to BigWorld
                      entities. The user data object definition file also specifies if the user
                      data object should be created in the server or in the client.
               </p>
               <p>The following file is a minimal entity definition file:</p><pre class="programlisting">&lt;root&gt;

  &lt;Domain&gt; the execution context for this user &lt;/Domain&gt; <a name="co186_domain" href="ch03.html#co186_domain_desc"><img src="../images/callouts/1.png" alt="1" border="0"></a>

  &lt;Parent&gt; optional parent entity &lt;/Parent&gt; <a name="co186_parent" href="ch03.html#co186_parent_desc"><img src="../images/callouts/2.png" alt="2" border="0"></a>

  &lt;Implements&gt; <a name="co188_implements" href="ch03.html#co188_implements_desc"><img src="../images/callouts/3.png" alt="3" border="0"></a>
     &lt;!-- interface references --&gt;
   &lt;/Implements&gt;

   &lt;Properties&gt; <a name="co199_properties" href="ch03.html#co199_properties_desc"><img src="../images/callouts/4.png" alt="4" border="0"></a>
     &lt;!-- properties --&gt;
   &lt;/Properties&gt;

&lt;/root&gt;</pre><p><span class="citetitle"><code class="filename"><em class="replaceable"><code>&lt;res&gt;/</code></em>scripts/user_data_object_defs/<em class="replaceable"><code>&lt;user_data_object&gt;</code></em>.def</code>
                         &#8212; Minimal user data object definition file</span></p>
               <div class="calloutlist">
                  <table border="0" summary="Callout list">
                     <tr>
                        <td width="5%" valign="top" align="left"><a name="co186_domain_desc"></a><a href="#co186_domain"><img src="../images/callouts/1.png" alt="1" border="0"></a> 
                        </td>
                        <td valign="top" align="left">
                           <p>The domain for a user data object can be either
                                      <span class="literal">CLIENT</span>, <span class="literal">CELL</span> or
                                      <span class="literal">BASE</span>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a name="co186_parent_desc"></a><a href="#co186_parent"><img src="../images/callouts/2.png" alt="2" border="0"></a> 
                        </td>
                        <td valign="top" align="left">
                           <p>For details, see <a href="ch06.html#xref_Entity_Parents" title="6.3.&nbsp;Entity Parents">Entity Parents</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a name="co188_implements_desc"></a><a href="#co188_implements"><img src="../images/callouts/3.png" alt="3" border="0"></a> 
                        </td>
                        <td valign="top" align="left">
                           <p>For details, see <a href="ch06.html#xref_Entity_Interfaces" title="6.2.&nbsp;Entity Interfaces">Entity Interfaces</a>.
                           </p>
                        </td>
                     </tr>
                     <tr>
                        <td width="5%" valign="top" align="left"><a name="co199_properties_desc"></a><a href="#co199_properties"><img src="../images/callouts/4.png" alt="4" border="0"></a> 
                        </td>
                        <td valign="top" align="left">
                           <p>For details, see <a href="ch04.html" title="Chapter&nbsp;4.&nbsp;Properties"><i xmlns:xlink="http://www.w3.org/1999/xlink">Properties</i></a>.
                           </p>
                        </td>
                     </tr>
                  </table>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_The_UDO_Script_Files"></a>3.3.&nbsp;The Script Files
                        </h2>
                     </div>
                  </div>
               </div>
               <p>BigWorld Technology divides processing of entities in a game world
                      into three different execution contexts, depending on its
                      <span class="literal">Domain</span>:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis">User Data Object Domain: Cell &#8212; Script
                                      File Location:
                                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/cell</code></em></p>
                        <p>User data objects to be used by entities in the cell.</p>
                     </li>
                     <li>
                        <p><em class="emphasis">User Data Object Domain: Base &#8212; Script
                                      File Location:
                                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/base</code></em></p>
                        <p>User data objects to be used by entities in the base.</p>
                     </li>
                     <li>
                        <p><em class="emphasis">User Data Object Domain: Client &#8212; Script
                                      File Location:
                                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/client</code></em></p>
                        <p>User data objects to be used by entities in the client.</p>
                     </li>
                  </ul>
               </div>
               <p>Most implementations of user data objects will only live either in
                      the cell or in the client. For an example of a user data object that lives
                      in the cell, see the <span class="literal">PatrolNode</span> user data object
                      scripts and definition file in the
                      <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts</code>
                      folder. For an example of a client-only user data object, look in the same
                      place for the scripts and definition file of the
                      <span class="literal">CameraNode</span> user data object.
               </p>
            </div>
         </div>
         <div class="navfooter">
            <hr class="navheaderline">
            <table width="95%" align="center" summary="Navigation footer">
               <tr>
                  <td width="38%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;
                  </td>
                  <td width="20%" align="center"><a accesskey="u" href="pt01.html">Up</a></td>
                  <td width="37%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Physical Entity Structure for Scripting&nbsp;</td>
                  <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
                  <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Properties</td>
               </tr>
               <tr>
                  <td colspan="3">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.
                     		   
                  </td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>