<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;3.&nbsp;Usage</title>
      <link rel="stylesheet" href="../css/bigworld.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="How To Use XMPP With BigWorld">
      <link rel="up" href="index.html" title="How To Use XMPP With BigWorld">
      <link rel="prev" href="ch02.html" title="Chapter&nbsp;2.&nbsp;Installation">
      <link rel="next" href="ch04.html" title="Chapter&nbsp;4.&nbsp;Implementation">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div id="bigworld-header"><img src="http://try.bigworldtech.com/bigworld/image.php?img=bigworld_logo.gif&amp;svn=$HeadURL:$" alt="bw logo"></div>
      <div id="content">
         <div class="navheader">
            <table width="95%" align="center" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Usage</th>
               </tr>
               <tr>
                  <td width="20%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;
                  </td>
                  <th width="55%" align="center">&nbsp;</th>
                  <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td>
               </tr>
            </table>
            <hr class="navheaderline">
         </div>
         <div class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="xref_XMPP_Usage"></a>Chapter&nbsp;3.&nbsp;Usage
                     </h2>
                  </div>
               </div>
            </div>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <dl>
                  <dt><span class="section"><a href="ch03.html#d0e174">3.1. Connecting to ejabberd using a client</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#xref_XMPP_Starting_A_FantasyDemo_Server">3.2. Starting a Fantasy Demo Server</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#d0e203">3.3. Connecting using the FantasyDemo client</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#d0e259">3.4. Communicating to the game client from your IM client</a></span></dt>
                  <dt><span class="section"><a href="ch03.html#d0e272">3.5. Communicating to the game server from your IM client</a></span></dt>
               </dl>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e174"></a>3.1.&nbsp;Connecting to ejabberd using a client
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Once the ejabberd server is running, it is now possible to connect
                      to it using a standard instant messaging client such as Gajim, Pidgin, or
                      any other of the myriad of clients that support XMPP. Please be aware
                  	that we have had reports of the Trillian Astra Pro IM client not being
                  	able to create accounts with the ejabberd setup described in this
                  	document.
               </p>
               <p>Connecting using a normal IM client will allow you to confirm that
                      you have correctly configured the ejabber server before attempting to
                      connect with a BigWorld server and client.
               </p>
               <p>Your client will be able to create a new account when attempting to
                      connect. If you are prompted for a "Resource name", the name of the IM
                      client you are using will suffice.
               </p>
               <p>If you have trouble connecting at this stage it is most likely
                      either a mis-configuration of the ejabber server or an incorrectly entered
                      set of details when trying to connect with the client. To check the server
                      configuration you can check the ejabber server logs which will should be
                      located for most distributions under
                      <code class="filename">/var/log/ejabberd</code>.
               </p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_XMPP_Starting_A_FantasyDemo_Server"></a>3.2.&nbsp;Starting a Fantasy Demo Server
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Provided the ejabber installation was performed correctly and the
                      server details were correctly provided, simply starting a server normally
                      should be enough to enable the example. All the initialisation of the
                      example is performed through the BaseApp personality script
                      <code class="filename">FantasyDemo.py</code>.
               </p>
               <p>To confirm that the Chat example has been enabled, search the
                      BaseApp <span class="literal">SCRIPT</span> output for the following line:
               </p><pre class="programlisting">XMPP Chat example enabled</pre></div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e203"></a>3.3.&nbsp;Connecting using the FantasyDemo client
                        </h2>
                     </div>
                  </div>
               </div>
               <p>On a Windows machine simply start the Fantasy Demo client as normal
                      and connect to the server that was started in <a href="ch03.html#xref_XMPP_Starting_A_FantasyDemo_Server" title="3.2.&nbsp;Starting a Fantasy Demo Server">Starting a Fantasy Demo Server</a>. Once connected and
                      in the game world there are 4 operations that can be performed:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>Add a friend to the players friends list</p>
                     </li>
                     <li>
                        <p>Message a friend</p>
                     </li>
                     <li>
                        <p>List all friends in the friends list</p>
                     </li>
                     <li>
                        <p>Delete a friend from the friends list</p>
                     </li>
                  </ul>
               </div>
               <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                  <h3 class="title">Note</h3>
                  <p>For all the commands that require a <span class="literal">&lt;friend
                              name&gt;</span>, in order for the Fantasy Demo script to differentiate
                           between the in game friend lists and the XMPP friends list, the friend
                           name MUST be a JID (which looks like an email address) e.g.
                           <span class="literal">friend@domain.com</span>. The domain name will be whatever
                           was specified when you configured your ejabber server in <a href="ch02.html#xref_XMPP_Servicing_Domains" title="2.3.1.&nbsp;Servicing Domains">Servicing Domains</a>.
                  </p>
               </div>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>To add a friend</p>
                        <p><span class="literal">/addFriend &lt;friend name&gt;</span></p>
                     </li>
                     <li>
                        <p>To message a friend</p>
                        <p><span class="literal">/msgFriend &lt;friend name&gt; : Message to your
                                      friend</span></p>
                     </li>
                     <li>
                        <p>To list all your friends</p>
                        <p><span class="literal">/listFriends</span></p>
                     </li>
                     <li>
                        <p>To delete a friend from your friends list</p>
                        <p><span class="literal">/delFriend &lt;friend name&gt;</span></p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e259"></a>3.4.&nbsp;Communicating to the game client from your IM client
                        </h2>
                     </div>
                  </div>
               </div>
               <p>Now you should have a connected game client and a connected
                      IM client , you should be able to communicate between the two. If
                      you haven't already, add your game client avatar name to your IM clients
                      friend list e.g. <span class="literal">avatar_name@domain.com</span>, and ensure
                      that you have added the IM client friend to your avatar's friends list
                      using <span class="literal">/addFriend im_name@domain.com</span>.
               </p>
               <p>You should now be able to send messages between the two.</p>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="d0e272"></a>3.5.&nbsp;Communicating to the game server from your IM client
                        </h2>
                     </div>
                  </div>
               </div>
               <p>FantasyDemo also has an <span class="literal">XMPPEventNotifier</span> entity
                      which you can communicate with via your IM client. This entity broadcasts
                      a text message whenever a Player logs on or off and can respond to watcher
                      queries. XMPPEventNotifier's JID is
                      <span class="literal">server_of_&lt;username&gt;@&lt;jabber server&gt;</span>, where
                      &lt;username&gt; is the name of the user running the server.
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>To query a watcher, send the message</p>
                        <p><span class="literal">getWatcher &lt;watcher path&gt;</span></p>
                     </li>
                  </ul>
               </div>
            </div>
         </div>
         <div class="navfooter">
            <hr class="navheaderline">
            <table width="95%" align="center" summary="Navigation footer">
               <tr>
                  <td width="38%" align="left"><a accesskey="p" href="ch02.html">Prev</a>&nbsp;
                  </td>
                  <td width="20%" align="center">&nbsp;</td>
                  <td width="37%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Installation&nbsp;</td>
                  <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
                  <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Implementation</td>
               </tr>
               <tr>
                  <td colspan="3">Copyright 1999-2010 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.
                     		   
                  </td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>